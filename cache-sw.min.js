"use strict";let t;async function e(t){let e=await hashwasm.createXXHash128();return await t.pipeTo(new WritableStream({write:t=>e.update(t)})),e.digest("binary")}async function a(t,a){let i=[...arguments].map(t=>t.headers.get("etag")?.trim().replace(/^W\//,""));if(i[0]&&i[0]==i[1])return!1;if(i.every(t=>t?.length>=34))return!0;let n=await Promise.all([...arguments].map(t=>e(t.clone().body)));return n[0].some((t,e)=>t!=n[1][e])}function i(t){return new URL(t.url).origin==location.origin}importScripts("https://cdn.jsdelivr.net/npm/hash-wasm@4.12.0/dist/xxhash128.umd.min.js");let n=new Map;async function r(t,e,i){!i.reload&&await a(t,e)&&(i.reload=!0)}async function s(t){let e=await clients.get(t);e&&await e.navigate(e.url)}async function o(t,e){return new Promise(a=>{setTimeout(()=>{t.petitions--,t.petitions<=0&&(n.delete(e),t.reload&&a(s(e))),a()})})}async function l(t,e){let a=await e.keys(t,{ignoreSearch:!0,ignoreVary:!0});await Promise.all(a.slice(0,-1).map(t=>e.delete(t)))}async function c(t){let e=await t.keys(),a=Math.max(Math.trunc(e.length/2),1);await Promise.all(e.slice(0,a).map(e=>t.delete(e)))}async function u(e,a,i,n){if("QuotaExceededError"!=n.name)throw n;return t||(t=c(e)).finally(()=>setTimeout(()=>{t=null})),await t,e.put(a,i.clone())}async function h(t,e){let a=await Promise.any([t,e]);return a?.status<500&&a||await t||e}async function w(t,e){return e.preloadResponse.then(e=>e||fetch(t)).then(t=>{if(t.status<500)return t;throw null}).catch(()=>fetch(t,{cache:"force-cache"}))}addEventListener("fetch",t=>{let e=t.request;if(!(i(e)||"style"==e.destination))return void("GET"==e.method&&t.respondWith(w(e,t)));let a=i(e),s=w(e,t),c=caches.open("runtime"),d=c.then(t=>t.match(e,{ignoreSearch:a})),p=h(d,s);if(t.respondWith(p.then(t=>t.clone())),a){let e;var m,f=t.resultingClientId||t.clientId,y=(m=f,(e=n.get(m))||(e={petitions:0},n.set(m,e)),e);y.petitions++}t.waitUntil(s.then(async t=>{if(200==t.status){let i=await c;await i.put(e,t.clone()).catch(a=>u(i,e,t,a)),a&&await d&&await Promise.all([r(await p,t,y),l(e,i)])}else"opaque"==t.type?await d||console.error(`${e.url} request is not crossorigin`):t.status<500&&await d&&await (await c).delete(e)}).finally(async()=>{a&&await o(y,f)}))}),addEventListener("activate",t=>t.waitUntil(registration.navigationPreload.enable())),skipWaiting();
