"use strict";let t;async function e(t){return new Uint32Array(await crypto.subtle.digest("SHA-256",await t.arrayBuffer()))}async function a(t,a){let n=[...arguments].map(t=>t.headers.get("etag")?.trim().replace(/^W\//,""));if(n[0]&&n[0]==n[1])return!1;if(n.every(t=>t?.length>=34))return!0;let i=await Promise.all([...arguments].map(t=>e(t.clone())));return i[0].some((t,e)=>t!=i[1][e])}function n(t){return new URL(t.url).origin==location.origin}let i=new Map;async function r(t,e,n){!n.reload&&await a(t,e)&&(n.reload=!0)}async function s(t){let e=await clients.get(t);e&&await e.navigate(e.url)}async function o(t,e){return new Promise(a=>{setTimeout(()=>{t.petitions--,t.petitions<=0&&(i.delete(e),t.reload&&a(s(e))),a()})})}async function l(t,e){let a=await e.keys(t,{ignoreSearch:!0,ignoreVary:!0});await Promise.all(a.slice(0,-1).map(t=>e.delete(t)))}async function c(t){let e=await t.keys(),a=Math.max(Math.trunc(e.length/2),1);await Promise.all(e.slice(0,a).map(e=>t.delete(e)))}async function u(e,a,n,i){if("QuotaExceededError"!=i.name)throw i;return t||(t=c(e)).finally(()=>setTimeout(()=>{t=null})),await t,e.put(a,n.clone())}async function w(t,e){let a=await Promise.any([t,e]);return a?.status<500&&a||await t||e}async function f(t,e){return e.preloadResponse.then(e=>e||fetch(t)).then(t=>{if(t.status<500)return t;throw null}).catch(()=>fetch(t,{cache:"force-cache"}))}addEventListener("fetch",t=>{let e=t.request;if(!(n(e)||"style"==e.destination))return void("GET"==e.method&&t.respondWith(f(e,t)));let a=n(e),s=f(e,t),c=caches.open("runtime"),h=c.then(t=>t.match(e,{ignoreSearch:a})),d=w(h,s);if(t.respondWith(d.then(t=>t.clone())),a){let e;var y,p=t.resultingClientId||t.clientId,m=(y=p,(e=i.get(y))||(e={petitions:0},i.set(y,e)),e);m.petitions++}t.waitUntil(s.then(async t=>{if(200==t.status){let n=await c;await n.put(e,t.clone()).catch(a=>u(n,e,t,a)),a&&await h&&await Promise.all([r(await d,t,m),l(e,n)])}else"opaque"==t.type?await h||console.error(`${e.url} request is not crossorigin`):t.status<500&&await h&&await (await c).delete(e)}).finally(async()=>{a&&await o(m,p)}))}),addEventListener("activate",t=>t.waitUntil(registration.navigationPreload.enable())),skipWaiting();